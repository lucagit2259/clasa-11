#include <iostream>
#include <cmath>
#include <fstream>
using namespace std;
int s[100], n, o;
int a[10][10];
char culori [5][10]={" ", "albastru", "rosu", "mov", "gri"};
ifstream fin("vecinii.txt");
void tipar(int k)
{cout<<"\nSolutia "<<o<<" este ";
    for(int i=1; i<=k; i++)
        cout<<"\ntara "<<i<<" colorata cu "<<culori [s[i]];
        cout<<"\n";

}
int succesor(int k)
{
    if(s[k]<4){
        s[k]++; return 1;
    }
    return 0;
}
int solutie(int k)
{
    return k==n;
}
int valid(int k)
{
    for(int i=1; i<k; i++)
    if (a[i][k] &&s[i]==s[k]) return 0;
    return 1;
}
void bt(int k)
{int as,ev;
    k=1;
    s[k]=0;
    while(k>0)
    {
        as=1; ev=0;
        while(as&& !ev)
        {
            as=succesor(k);
            if(as)
            ev=valid(k);
         }
        if(as)
            if(solutie(k))
            {   o++;
                tipar(k);
            }
            else{
                k++;
                s[k]=0;
            }
            else k--;
    }
}
int main()
{
    cin>>n;
    for (int i=1; i<=n; i++)
    for (int j=1; j<=n; j++)

      fin>>a[i][j];
for (int i=1; i<=n; i++){
    for (int j=1; j<=n; j++)
      cout<<a[i][j]<<" ";
      cout<<endl;
}
  bt(n);
  cout<<endl<<o<<" solutii";
     return 0;
}
/* din vecinii. txt
0 1 0 1 0
1 0 1 1 1
0 1 0 0 1
1 1 0 0 1
0 1 1 1 0
*/
