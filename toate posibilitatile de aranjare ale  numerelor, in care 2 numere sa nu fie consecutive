#include <iostream>
#include <cmath>
using namespace std;
int s [100];
int n, as, ev, k, m;
int numere [10];
void tipar(){
    for (int i=1; i<=n; i++)
    {
        cout<<numere[s[i]]<<" ";
    }
    cout<<endl;
}
int succesor()
{
    if (s[k]<n){
        s[k]++;
        return 1;
    }
    return 0;
}
int solutie()
{
     return k==n;
}
int valid()
{
    if(k>1 && abs(s[k]-s[k-1])==1) return 0;
    for(int i=1; i<k; i++)
    {
        if(s[i]==s[k]) return 0;
    }
    return 1;
}
void bt()
{
    k=1; s[k]=0;
    while(k>0)
    {
        as=1; ev=0;
        while(as&& !ev)
        {
            as=succesor();
            if(as)
            ev=valid(); }
        if (as)
            if (solutie())
        {
            m++;
            tipar();
        }
        else{
            k++; s[k]=0;
        }
        else k--;
    }
}
int main()
{
    cout<<"cate numere introduceti? ";
    cin>>n;
    for(int i=1; i<=n; i++)
    {
        cout<<"nr"<<i<<": ";
        cin>>numere[i];
    }
    bt();
    cout<<endl<<"solutii: "<<m;
    return 0;
}
